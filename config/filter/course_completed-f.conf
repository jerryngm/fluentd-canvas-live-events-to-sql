<filter canvas.course_completed>
  @type record_transformer
  enable_ruby
  <record>
#body progress
requirement_count            "${record['body']['progress']['requirement_count'].to_i}"
requirement_completed_count  "${record['body']['progress']['requirement_completed_count'].to_i}"
next_requirement_url         "${record['body']['progress']['next_requirement_url'].to_s}"
completed_at                 "${record['body']['progress']['completed_at']}"
error_message                "${record['body']['progress']['error']['message']}"
# body user
user_id                      "${record['body']['user']['id'].to_i}"
user_name                    "${record['body']['user']['name'].to_s}"
user_email                   "${record['body']['user']['email'].to_s}"
# body course
course_id                    "${record['body']['course']['id'].to_i}"
course_name                  "${record['body']['course']['name'].to_s}"
account_id                   "${record['body']['course']['account_id'].to_i}"
sis_source_id                "${record['body']['course']['sis_source_id'].to_s}"
  </record>
</filter>
